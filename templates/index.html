<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <title>LAB Stackoverflow</title>
</head>
<body bgcolor="#fefefe">
<table>
    <tr>
        <td>
            <a href="{{ url_for("index") }}">
            <img src="/static/images/stack_lab_askmate.png" width = "600" height="auto">
            </a>
        </td>
        <td>
            <form action="{{ url_for('add_question_get')}}">
                <button type="submit" style="border: 0 none; background: none;" name="ask_a_question" value="ask_a_question"><img src="/static/images/ask_a_question.png" width="200" height="auto"></button>
            </form>
        </td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td>
            <form action="{{ url_for('login_get')}}">
                <button type="submit" style="border: 0 none; background: none;" name="login" value="login"><img src="/static/images/user.png" width="35" height="35"></button>
            </form>
        </td>
        <td>
            <form action="{{ url_for('register_get')}}">
                <button type="submit" style="border: 0 none; background: none;" name="register" value="register"><img src="/static/images/new_user.png" width="35" height="35"></button>
            </form>
        </td>

    </tr>
</table>
<table border="1" width="60%">
    <tr>
        <td  style="text-align: right"  width="25%">
            Active Questions filter :</td>

        <td style="text-align: left" width="30" colspan="4">

        <form method = "POST" action="{{ url_for("index_post") }}">
            <button type="submit" style="border: 0 none; background: none;" name="actual_advanced_filter_date_clicked" value="clicked">
                {% if server_state.actual_advanced_filter_on_date == "no" %}
                <img src="/static/images/filter_date_on.png" width="22" height="auto">
                {{ server_state.actual_filter_by_date_mode }}
                {% else %}
                <img src="/static/images/up-chevron-2.png"  width="16" height="auto">
                {% endif %}
            </button>

            <button type="submit" style="border: 0 none; background: none;" name="actual_advanced_filter_status_clicked" value="clicked">
                {% if server_state.actual_advanced_filter_on_status == "no" %}
                <img src="/static/images/filter_date_on.png" width="22" height="auto">
                {{ server_state.actual_filter_by_status_mode }}
                {% else %}
                <img src="/static/images/up-chevron-2.png"  width="16" height="auto">
                {% endif %}
            </button>

            <button type="submit" style="border: 0 none; background: none;" name="filter_reset_button_clicked" value="clicked">
                {% if server_state.filter_reset_active == "no" %}
                {% else %}
                <img src="/static/images/clear_filter.png"  width="22" height="auto">
                    Reset All Filters
                {% endif %}
            </button>

        </form>
    </tr>
    {% if server_state.actual_advanced_filter_on_date == "yes" %}
    <tr>
        <td style="text-align: right" >Status: </td>

        <td style="text-align: left" colspan="4">

        <form method = "POST" action="{{ url_for("index_post") }}">
            <input type="hidden" name="date_filter_changed" value="true">
            <button type="submit" style="border: 0 none; background: none;" data-inline="true" name="date_filter" value="Last month">
                {% if server_state.actual_filter_by_date_mode == "Last month" %}
                <img src="/static/images/filter_date_on.png" width="22" height="auto">
                Last month
                {% else %}
                <img src="/static/images/filter_date_off.png"  width="22" height="auto">
                Last month
                {% endif %}
            </button>

            <button type="submit" style="border: 0 none; background: none;" data-inline="true" name="date_filter" value="3 last months">
                {% if server_state.actual_filter_by_date_mode == "3 last months" %}
                <img src="/static/images/filter_date_on.png" width="22" height="auto">
                3 last months
                {% else %}
                <img src="/static/images/filter_date_off.png"  width="22" height="auto">
                3 last months
                {% endif %}
            </button>

            <button type="submit" style="border: 0 none; background: none;" data-inline="true" name="date_filter" value="All">
                {% if server_state.actual_filter_by_date_mode == "All" %}
                <img src="/static/images/filter_date_on.png" width="22" height="auto">
                All time
                {% else %}
                <img src="/static/images/filter_date_off.png"  width="22" height="auto">
                All time
                {% endif %}
            </button>

        </form>
        </td>
    </tr>
    {% endif %}

    {% if server_state.actual_advanced_filter_on_status == "yes" %}
    <tr>
        <td style="text-align: right" >Status: </td>

        <td style="text-align: left" colspan="4">

        <form method = "POST" action="{{ url_for("index_post") }}">
            <input type="hidden" name="status_filter_changed" value="true">
            <button type="submit" style="border: 0 none; background: none;" data-inline="true" name="status_filter" value="active">
                {% if server_state.actual_filter_by_status_mode == "active" %}
                <img src="/static/images/filter_date_on.png" width="22" height="auto">
                active
                {% else %}
                <img src="/static/images/filter_date_off.png"  width="22" height="auto">
                active
                {% endif %}
            </button>

            <button type="submit" style="border: 0 none; background: none;" data-inline="true" name="status_filter" value="new">
                {% if server_state.actual_filter_by_status_mode == "new" %}
                <img src="/static/images/filter_date_on.png" width="22" height="auto">
                new
                {% else %}
                <img src="/static/images/filter_date_off.png"  width="22" height="auto">
                new
                {% endif %}
            </button>

            <button type="submit" style="border: 0 none; background: none;" data-inline="true" name="status_filter" value="discussed">
                {% if server_state.actual_filter_by_status_mode == "discussed" %}
                <img src="/static/images/filter_date_on.png" width="22" height="auto">
                discussed
                {% else %}
                <img src="/static/images/filter_date_off.png"  width="22" height="auto">
                discussed
                {% endif %}
            </button>

            <button type="submit" style="border: 0 none; background: none;" data-inline="true" name="status_filter" value="closed">
                {% if server_state.actual_filter_by_status_mode == "closed" %}
                <img src="/static/images/filter_date_on.png" width="22" height="auto">
                closed
                {% else %}
                <img src="/static/images/filter_date_off.png"  width="22" height="auto">
                closed
                {% endif %}
            </button>

            <button type="submit" style="border: 0 none; background: none;" data-inline="true" name="status_filter" value="all">
                {% if server_state.actual_filter_by_status_mode == "all" %}
                <img src="/static/images/filter_date_on.png" width="22" height="auto">
                all
                {% else %}
                <img src="/static/images/filter_date_off.png"  width="22" height="auto">
                All
                {% endif %}
            </button>

        </form>
        </td>
    </tr>
    {% endif %}



    <tr>
        <td style="text-align: right">Search: </td>
        <td  colspan="5">
        <form method = "POST" action="{{ url_for("index_post") }}">
            <input  name="searched_text" type="text"  value="{{ server_state.actual_filter_by_search_mode }}" placeholder="Type in for search in questions.." size="65%"/>
            <button type="submit" style="border: 0 none; background: none;" name="filter_search_clicked" value="yes"><img src="/static/images/search.png" width="26" height="auto">Search</button>
        </form>

        </td>
    </tr>


</table>
<table border="1" width="60%">
        <thead>
            <tr>
                {% for header in headers %}
                    {% for property in header %}
                        <th scope="col">
                            {% if header.get(property) != "id"
                            and header.get(property) != "image"
                            and header.get(property) != "message"
                            and header.get(property) != "submission_time"  %}

                            {% if header.get(property) == "vote_number" %}
                                <a href="{{ url_for("index_post", sort_question_column=header.get(property))  }}">Votes</a>
                                 <th><a href="{{ url_for("index_post", sort_question_column="Answers")  }}">Answers</a>
                                {% if "Answers" == server_state.actual_sort_column %}
                                    {% if server_state.actual_sort_direction == 'ascending' %}
                                    <img src="static/images/up-arrow-4.png" width="10" height="auto">
                                    {% else %}
                                    <img src="static/images/down-arrow-4.png" width="10" height="auto">
                                    {% endif %}
                                {% endif %}
                                </th>
                            {% elif header.get(property) == "view_number" %}
                                <a href="{{ url_for("index_post", sort_question_column=header.get(property))  }}">Views</a>
                            {% elif header.get(property) == "title" %}
                                <a href="{{ url_for("index_post", sort_question_column=header.get(property))  }}">Question</a>
                            {% elif header.get(property) =="tag" %}
                                Tags
                            {% else %}
                                <a href="{{ url_for("index_post", sort_question_column=header.get(property))  }}">{{ header.get(property) }}</a>
                            {% endif %}

                            {% if header.get(property) == server_state.actual_sort_column %}
                                {% if server_state.actual_sort_direction == 'descending' %}
                                <img src="static/images/up-arrow-4.png" width="10" height="auto">
                                {% else %}
                                <img src="static/images/down-arrow-4.png" width="10" height="auto">
                                {% endif %}
                            {% endif %}
                        {% endif %}
                        </th>
                    {% endfor %}
                {% endfor %}
                <th>
                    <a href="{{ url_for("index_post", sort_question_column="submission_time")  }}">Date Asked
                        {% if "submission_time" == server_state.actual_sort_column %}
                            {% if server_state.actual_sort_direction == 'descending' %}
                                <img src="static/images/up-arrow-4.png" width="10" height="auto">
                            {% else %}
                                <img src="static/images/down-arrow-4.png" width="10" height="auto">
                            {% endif %}
                        {% endif %}
                </th>
            </tr>
        </thead>
        <tbody>
            {% for question in questions %}
            <tr>
                {% for property in question %}
                {% if property == "vote_number" %}
                       <td>header.get(property) </td>
{#                    <td  style="text-align:center">{{ answers_number=question.get("id") }}</td>#}
{#                {% elif header.get(property) == "status" %}#}
{#                    <td  style="text-align:center">#}
{#                        {% if question["status"] == "new" %}#}
{#                            <img src="/static/images/question_status_new.png" width="33" height="auto">#}
{#                        {% elif question["status"] == "discussed" %}#}
{#                            <img src="/static/images/question_status_discussed.png" width="33" height="auto">#}
{#                        {% elif question["status"] == "closed" %}#}
{#                            <img src="/static/images/question_status_closed.png" width="33" height="auto">#}
{#                        {% endif %}#}
{#                        <br>#}
{#                        {{ question["status"] }}#}
{#                    </td>#}
                {% else %}
                    <td  style="text-align:center">
                    {% if property == "title" %}
                        <a href="{{ url_for("display_a_question", question_id=question.get("id"))}}">{{ question.get(property)  | truncate(70)  }}</a>
{#                    {% elif header == "tag" %}#}
{#                        {% for tag in question["Tag"] %}#}
{#                            {{ tag }};#}
{#                        {% endfor %}#}
                    {% elif property != "id" and property != "image" and property != "message" and property != "submission_time" %}
                        {{ question.get(property) }}
                    {% endif %}
                    </td>
                {% endif %}
            {% endfor %}
                <td></td>
                <td style="text-align:center">{{ question.get("vote_number") }}</td>
                <td>{{ question.get("submission_time") }}</td>
                <td  style="text-align:center">
                {{ question.get("message") | truncate(50) }}
                </td>
            </tr>


            {% endfor %}
        </tbody>
    </table>
</body>
</html>
